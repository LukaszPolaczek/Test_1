<!-- extend base layout -->
{% extends "base.html" %}

{% block content %}

<div class="container" role="main">
    <div class="header">
        <div class="header__item">
            <p class="header__result">{{ header[0] }}<span>Liczba udzielonych odpowiedzi</span></p>
            <img src="../static/images/users.svg" alt="" class="icon">
        </div>
        <div class="header__item">
            <p class="header__result">{{ header[1] }}<span>Średni wiek</span></p>
          <img src="../static/images/age.svg" alt="" class="icon">
        </div>
        <div class="header__item">
            <p class="header__result">{{ header[2] }} PLN<span>Średnie wydatki za mieszkanie</span></p>
           <img src="../static/images/money.svg" alt="" class="icon">
        </div>
        <div class="header__item">
            <p class="header__result place-to-live"></p>
            <img src="../static/images/place.svg" alt="" class="icon">
        </div>
    </div>
    <div id="chart_div"></div>
</div>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
console.log({{ data_for_chart_1|tojson }})
  google.load('visualization', '1', {'packages':['corechart']});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data_for_chart_1 = new google.visualization.DataTable();
    data_for_chart_1.addColumn('string', 'Question');
    data_for_chart_1.addColumn('number', 'Suma odpowiedzi "mało istotne"');
    data_for_chart_1.addColumn('number', 'Suma odpowiedzi "średnio istotne"');
    data_for_chart_1.addColumn('number', 'Suma odpowiedzi "bardzo istotne"');
    data_for_chart_1.addRows( {{ data_for_chart_1|tojson }} );
    var chart = new google.visualization.ColumnChart(
            document.getElementById('chart_div'));
    chart.draw(data_for_chart_1, {legend: 'none', vAxis: {baseline: 0} });
  }
</script>
<script>
     var arr = {{ header[3] }};
     var index = arr.indexOf(Math.max(...arr));
     var placesArray = ["Akademik","Mieszkanie (samodzielnie)","Pokój 1-osobowy","Pokój wieloosobowy","Mieszkam z rodzicami"]
     var place = placesArray[index]
    document.getElementsByClassName("place-to-live")[0].innerHTML = place + "<span>Najwięcej osób mieszka w... </span>"

</script>

{% endblock %}