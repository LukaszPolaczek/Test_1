<!-- extend base layout -->
{% extends "base.html" %}

{% block content %}

<div class="page-header">
    <h1>Results</h1>
    <div id="chart_div"></div>
    <div id="trendChart_div"></div>
</div>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
    var trendData = {{ trendData | tojson }}

    google.load('visualization', '1', {'packages': ['corechart']});
    google.charts.load('current', {packages:['corechart']});
    google.setOnLoadCallback(drawChart);
    google.setOnLoadCallback(drawTrendChart);

    function drawChart() {
        var data_for_chart_1 = new google.visualization.DataTable();
        data_for_chart_1.addColumn('string', 'Question');
        data_for_chart_1.addColumn('number', 'Suma odpowiedzi "mało istotne"');
        data_for_chart_1.addColumn('number', 'Suma odpowiedzi "średnio istotne"');
        data_for_chart_1.addColumn('number', 'Suma odpowiedzi "bardzo istotne"');
        data_for_chart_1.addRows({{ data_for_chart_1 | tojson }});
        var chart = new google.visualization.ColumnChart(
            document.getElementById('chart_div'));
        chart.draw(data_for_chart_1, {legend: 'none', vAxis: {baseline: 0}});
    }

    function drawTrendChart() {

        var data = google.visualization.arrayToDataTable([
            ['', ''],
            trendData.pop(0)
        ]);

        trendData.forEach(function(entry){
            data.addRow(entry);
        });

        var options = {
            hAxis: {title: 'Wiek'},
            vAxis: {title: 'Cena'},
            legend: 'none',
            trendlines: {0: {}}
        };

        var chart = new google.visualization.ScatterChart(document.getElementById('trendChart_div'));
        chart.draw(data, options);
    }

</script>
{% endblock %}